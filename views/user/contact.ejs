<%- include('../partial/user/header') %>
    <style>
        :root {
            --primary-color: #0d6efd;
            --secondary-color: #6c757d;
            --success-color: #198754;
        }

       .section {
        background-color: var(--bg-color);
       }

        .card {
            transition: background-color 0.3s, color 0.3s;
            border: none;
            border-radius: 12px;
            box-shadow: 0 5px 15px var(--nav-shadow);
        }

        .card {
            background-color: var(--card-bg);
        }

        .contact-icon {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 24px;
            margin-bottom: 15px;
            color: white;
            background: linear-gradient(135deg, #0d6efd, #0099ff);
        }

        .h4 ,.h3 ,.h5{
            color: var( --text-color);  
        }

        .text-muted ,
        .form-label ,
        .list-unstyled li  {
            color: var(--text-muted) !important;
        }
        .form-control {
            background-color: var(--card-bg);
        }
      
         .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 15px;
            transition: all 0.3s;
            background-color: var(--card-bg);
            color:var(--text-color);
            border-color: var( --search-row-border);
        }

        .form-control::placeholder {
            color: var( --text-muted);
        }

        .form-control:focus {
            background-color: var(--bg-focus ); 
            box-shadow:0 0 0 0.25rem rgba(13, 110, 253, 0.25);
            color: var(--text-color);
        }

        .btn-primary {
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
            background: linear-gradient(135deg, #0d6efd, #0099ff);
            border: none;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.4);
        }

        .map-container {
            height: 300px;
            border-radius: 12px;
            overflow: hidden;
        }

        .contact-heading {
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #0d6efd, #9000ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .contact-heading {
            background: linear-gradient(135deg, #4dabff, #c17aff);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .contact-card {
            height: 100%;
            transition: transform 0.3s;
        }

        .contact-card:hover {
            transform: translateY(-5px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #0d6efd, #0099ff);
            color: white;
            font-size: 18px;
            transition: all 0.3s;
        }

        .social-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.4);
        }

        .accordion-item {
            border: none;
            margin-bottom: 15px;
            border-radius: 8px !important;
            overflow: hidden;
        }

        .accordion-item {
            background-color: var(--card-bg);
        }

        .accordion-button {
            padding: 15px 20px;
            font-weight: 600;
            border-radius: 8px !important;
        }

        .accordion-button {
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        .accordion-button:not(.collapsed) {
            background-color: #0d6efd;
            color: var(--text-color);
        }

       .accordion-button::after {
            filter: invert(1);
        }

       .accordion-body {
            background-color: var(--bg-color);
            color:var(--text-color);
        }
        
    </style>

  <div class="section">
    <div class="container py-5">
        <!-- Contact Info Cards -->
        <div class="row g-4 mb-5">
            <div class="col-md-4">
                <div class="card contact-card p-4 text-center h-100">
                    <div class="contact-icon mx-auto">
                        <i class="bi bi-telephone"></i>
                    </div>
                    <h3 class="h4 mb-3">Call Us</h3>
                    <p class="mb-0 text-muted">Our support team is available 24/7 to assist you with any inquiries.</p>
                    <p class="fw-bold mt-3 mb-0 text-muted">+91 7510198336</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card contact-card p-4 text-center h-100">
                    <div class="contact-icon mx-auto">
                        <i class="bi bi-envelope"></i>
                    </div>
                    <h3 class="h4 mb-3">Email Us</h3>
                    <p class="mb-0 text-muted ">Send us an email and we'll get back to you within 24 hours.</p>
                    <p class="fw-bold mt-3 mb-0 text-muted ">support@digitalden.com</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card contact-card p-4 text-center h-100">
                    <div class="contact-icon mx-auto">
                        <i class="bi bi-geo-alt"></i>
                    </div>
                    <h3 class="h4 mb-3">Visit Us</h3>
                    <p class="mb-0 text-muted ">Come to our store and experience our products firsthand.</p>
                    <p class="fw-bold mt-3 mb-0 text-muted "> Perinthalmanna , Malappuram , Kerala 679325</p>
                </div>
            </div>
        </div>
        <!-- Contact Form and Map -->
        <div class="row g-4 mb-5">
            <div class="col-lg-6">
                <div class="card p-4">
                    <h2 class="h3 mb-4">Send us a Message</h2>
                    <form id="contactForm">
                        <input type="hidden" name="access_key" value="51aaa1a1-3565-4c34-b5a9-2c5311ff9fb7">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="name" class="form-label">Full Name</label>
                                    <input type="text" class="form-control" id="name" name="name" placeholder="John Doe" >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="email" name="email" placeholder="john@example.com" >
                                    <div class="invalid-feedback"></div>    
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone" name="phone" placeholder="enter phone number">
                            <div class="invalid-feedback"></div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="subject" class="form-label">Subject</label>
                            <select class="form-select" id="subject" name="subject" >
                                <option value="" selected disabled>Select a subject</option>
                                <option value="general">General Inquiry</option>
                                <option value="support">Technical Support</option>
                                <option value="sales">Sales & Pricing</option>
                                <option value="feedback">Feedback</option>
                                <option value="order">Order Status</option>
                                <option value="return">Returns & Refunds</option>
                            </select>
                            <div class="invalid-feedback"></div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="message" class="form-label">Message</label>
                            <textarea class="form-control" id="message" name="message" rows="5" placeholder="How can we help you?" ></textarea>
                            <div class="invalid-feedback"></div>
                        </div>                
                        <div class="text-end">
                            <button type="submit" form="contactForm" class="btn btn-primary">
                                <i class="bi bi-send me-2"></i>Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-body">
                        <h2 class="h3 mb-4">Our Location</h2>
                        <div class="map-container mb-4">
                            <!-- Replace with your actual Google Maps embed code -->
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d89310.46515382857!2d76.18159980059224!3d10.970811156750576!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ba7cc529833b09b%3A0x1635a9815f140cc2!2sPerinthalmanna%2C%20Kerala!5e0!3m2!1sen!2sin!4v1746182035697!5m2!1sen!2sin" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                        </div>
                        
                        <h3 class="h5">Business Hours</h3>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="bi bi-clock me-2"></i><strong>Monday - Friday:</strong> 9:00 AM - 8:00 PM</li>
                            <li class="mb-2"><i class="bi bi-clock me-2"></i><strong>Saturday:</strong> 10:00 AM - 6:00 PM</li>
                        </ul>
                        
                        <div class="social-links">
                            <a href="#" class="social-link"><i class="bi bi-facebook"></i></a>
                            <a href="#" class="social-link"><i class="bi bi-twitter"></i></a>
                            <a href="#" class="social-link"><i class="bi bi-instagram"></i></a>
                            <a href="#" class="social-link"><i class="bi bi-linkedin"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FAQ Section -->
        <div class="card mb-5">
            <div class="card-body">
                <h2 class="h3 mb-4">Frequently Asked Questions</h2>
                
                <div class="accordion" id="contactFaq">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1" aria-expanded="true" aria-controls="faq1">
                                How do I track my order?
                            </button>
                        </h2>
                        <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#contactFaq">
                            <div class="accordion-body">
                                You can track your order by logging into your account and visiting the "Order History" section. Alternatively, you can use the tracking number provided in your shipping confirmation email.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2" aria-expanded="false" aria-controls="faq2">
                                What is your return policy?
                            </button>
                        </h2>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#contactFaq">
                            <div class="accordion-body">
                                We offer a 30-day return policy for most products. Items must be in their original condition with all packaging and accessories. Some products like software and custom-configured systems may have different return policies.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3" aria-expanded="false" aria-controls="faq3">
                                Do you offer international shipping?
                            </button>
                        </h2>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#contactFaq">
                            <div class="accordion-body">
                                Yes, we ship to most countries worldwide. International shipping costs and delivery times vary based on location. Please note that additional customs fees may apply depending on your country's import regulations.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4" aria-expanded="false" aria-controls="faq4">
                                How can I get technical support for my product?
                            </button>
                        </h2>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#contactFaq">
                            <div class="accordion-body">
                                Our technical support team is available via phone, email, or live chat. For immediate assistance, please call our support line at +1 (800) 123-4567. You can also check our Support Center for troubleshooting guides and common solutions.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() { 
            const contactForm = document.getElementById('contactForm');
            if (contactForm) {
                contactForm.addEventListener('submit',async function(e) {
                    e.preventDefault();
                    clearErrors(contactForm);

                    const formData = new FormData(contactForm);
                    const jsonData = Object.fromEntries(formData);
                    //trim all values 
                    Object.keys(jsonData).forEach(key => {
                        if (typeof jsonData[key] === 'string') {
                            jsonData[key] = jsonData[key].trim();
                        }
                    });

                    console.log("jsonData:",jsonData);

                    const errors = validateContactForm(jsonData);
                    if(errors) {
                        displayFormErrors(contactForm, errors );
                         return;
                    }

                    try {
                        const response = await fetch("https://api.web3forms.com/submit",{
                        method: 'POST',
                        body: formData

                    });

                    console.log("response:",response);

                    if(response.ok){
                        Swal.fire({
                            title: 'Success!',
                            text: 'Your message has been sent successfully.',
                            icon: 'success',
                            timer: 1500,
                            timerProgressBar: true,
                            showConfirmButton: "OK"
                        });

                    }else {
                        Swal.fire({
                            title: 'Error!',
                            text: 'An error occurred. Please try again later.',
                            icon: 'error',
                            timer: 1500,
                            showConfirmButton: false
                        });
                    }
                    contactForm.reset();

                    } catch (error) {
                        Swal.fire({
                            title: 'Error!',
                            text: 'An error occurred. Please try again later.',
                            icon: 'error',
                            timer: 1500,
                            showConfirmButton: "Ok"
                        });
                    }
                });
            }
        });

        function validateContactForm(data) {
            const errors = {};

            // name 
            if (!data.name) {
                errors.name = "Full Name is required";
            } else if (!/^[A-Za-z\s]+$/.test(data.name)) {
                errors.name = "Name must contain only letters and spaces";
            } else if (data.name.length < 3 || data.name.length > 50) {
                errors.name = "Name must be between 3 and 50 characters";
            } else if (/([a-zA-Z]{2,})\1{2,}/i.test(data.name)){
                errors.name = "Name appears to be repetitive or spam-like";
            } else if (/^(.)\1{4,}$/.test(data.name)) {
                errors.name = "Too many repeating characters in name";
            }
 
            // Email 
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
            if (!data.email) {
                errors.email = 'Email address is required.';
            } else if (!emailRegex.test(data.email)) {
                errors.email = 'Please enter a valid email address.';
            }

            // phone number 6-9 frond 
            const phoneRegex = /^[6-9]\d{9}$/;
            if (!data.phone) {
                errors.phone = 'Phone number is required.';
            } else if (!phoneRegex.test(data.phone)) {
                errors.phone = 'Please enter a valid 10-digit phone number.';
            }

            // Subject 
            if (!data.subject) {
                errors.subject = 'Please select a subject.';
            }

            // Message Validation
            const hasAlphabet = /[a-zA-Z]/;
            const messageRegex = /^[\w\s.,!?'"@#%&*()\-+=:;/\\[\]{}|<>`~]{10,2000}$/;
            if (!data.message) {
                errors.message = 'Message is required.';
            } else if (data.message.length < 10 || data.message.length > 2000) {
                errors.message = 'Message must be between 10 and 2000 characters.';
            } else if (!hasAlphabet.test(data.message)) {
                errors.message = 'Message must include meaningful content (not just symbols).';
            }

            return Object.keys(errors).length > 0 ? errors : null;
        }

        function displayFormErrors(form, errors) {
            clearErrors(form);
            if (errors && typeof errors === 'object') {
                Object.entries(errors).forEach(([field, message]) => {
                    const input = form.querySelector(`[name="${field}"]`);
                    if (input) {
                        input.classList.add('is-invalid');
                        const feedback = input.nextElementSibling;
                        if (feedback?.classList.contains('invalid-feedback')) {
                            feedback.textContent = message;
                        }
                    }
                });
            }
        } 

        function clearErrors(form) {
            form.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
            form.querySelectorAll('.invalid-feedback').forEach(el => el.textContent = '');
        }
    
    </script>

<%- include('../partial/user/footer') %>
